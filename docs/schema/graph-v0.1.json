{
  "$defs": {
    "Edge": {
      "properties": {
        "source": {
          "title": "Source",
          "type": "string"
        },
        "target": {
          "title": "Target",
          "type": "string"
        },
        "type": {
          "$ref": "#/$defs/EdgeType"
        },
        "line": {
          "anyOf": [
            {
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Line"
        }
      },
      "required": [
        "source",
        "target",
        "type"
      ],
      "title": "Edge",
      "type": "object"
    },
    "EdgeType": {
      "enum": [
        "IMPORTS",
        "CALLS",
        "EXTENDS"
      ],
      "title": "EdgeType",
      "type": "string",
      "description": "Types of relationships: IMPORTS (import statements), CALLS (function calls), EXTENDS (class inheritance). Custom types starting with CUSTOM_ are also allowed."
    },
    "BlameInfo": {
      "properties": {
        "primary_author": {
          "title": "Primary Author",
          "type": "string",
          "description": "The main contributor to this file"
        },
        "contributors": {
          "title": "Contributors",
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "List of all contributors"
        },
        "author_distribution": {
          "title": "Author Distribution",
          "type": "object",
          "additionalProperties": {
            "type": "integer"
          },
          "description": "Map of author names to line counts"
        }
      },
      "required": [
        "primary_author",
        "contributors",
        "author_distribution"
      ],
      "title": "BlameInfo",
      "type": "object"
    },
    "Node": {
      "properties": {
        "id": {
          "title": "Id",
          "type": "string",
          "description": "Unique identifier (path::type::name)"
        },
        "type": {
          "title": "Type",
          "type": "string",
          "enum": ["file", "class", "function"],
          "description": "Node type: file, class, or function"
        },
        "name": {
          "title": "Name",
          "type": "string",
          "description": "Name of the entity"
        },
        "path": {
          "title": "Path",
          "type": "string",
          "description": "Relative path to the file"
        },
        "lines": {
          "anyOf": [
            {
              "items": {
                "type": "integer"
              },
              "type": "array",
              "minItems": 2,
              "maxItems": 2
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Lines",
          "description": "Line range [start, end]"
        },
        "docstring": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Docstring",
          "description": "Documentation string"
        },
        "blame": {
          "anyOf": [
            {
              "$ref": "#/$defs/BlameInfo"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Blame",
          "description": "Git blame information"
        }
      },
      "required": [
        "id",
        "type",
        "name",
        "path"
      ],
      "title": "Node",
      "type": "object",
      "additionalProperties": true
    },
    "Repository": {
      "properties": {
        "path": {
          "title": "Path",
          "type": "string"
        },
        "name": {
          "title": "Name",
          "type": "string"
        }
      },
      "required": [
        "path",
        "name"
      ],
      "title": "Repository",
      "type": "object"
    },
    "Stats": {
      "properties": {
        "total_nodes": {
          "title": "Total Nodes",
          "type": "integer"
        },
        "total_edges": {
          "title": "Total Edges",
          "type": "integer"
        },
        "node_types": {
          "additionalProperties": {
            "type": "integer"
          },
          "title": "Node Types",
          "type": "object"
        },
        "average_complexity": {
          "title": "Average Complexity",
          "type": "number",
          "default": 0.0
        },
        "hot_spots_count": {
          "title": "Hot Spots Count",
          "type": "integer",
          "default": 0
        }
      },
      "required": [
        "total_nodes",
        "total_edges",
        "node_types"
      ],
      "title": "Stats",
      "type": "object"
    }
  },
  "properties": {
    "version": {
      "title": "Version",
      "type": "string"
    },
    "generated_at": {
      "format": "date-time",
      "title": "Generated At",
      "type": "string"
    },
    "repository": {
      "$ref": "#/$defs/Repository"
    },
    "stats": {
      "$ref": "#/$defs/Stats"
    },
    "nodes": {
      "items": {
        "$ref": "#/$defs/Node"
      },
      "title": "Nodes",
      "type": "array"
    },
    "edges": {
      "items": {
        "$ref": "#/$defs/Edge"
      },
      "title": "Edges",
      "type": "array"
    },
    "sha": {
      "title": "SHA",
      "type": "string",
      "default": "",
      "description": "Git commit SHA of the analyzed repository state"
    }
  },
  "required": [
    "version",
    "generated_at",
    "repository",
    "stats",
    "nodes",
    "edges"
  ],
  "title": "Graph",
  "type": "object"
}