# ADR-002: Plugin architecture

## Статус
Принято

## Контекст
Codex Aura должен поддерживать анализ различных языков программирования и типов зависимостей. Требования:

- Расширяемость для новых языков
- Модульная архитектура
- Легкость добавления новых анализаторов
- Независимость компонентов

## Рассмотренные варианты

### 1. Монолитная архитектура
- **Плюсы**: Простота разработки
- **Минусы**: Сложность добавления новых языков, тесная связь компонентов

### 2. Plugin architecture с интерфейсами
- **Плюсы**: Расширяемость, слабая связь, тестируемость
- **Минусы**: Сложность реализации, overhead

### 3. Strategy pattern
- **Плюсы**: Простота, полиморфизм
- **Минусы**: Сложность добавления новых стратегий в runtime

### 4. Microservices
- **Плюсы**: Масштабируемость, независимость
- **Минусы**: Сложность развертывания, overhead коммуникации

## Решение
Plugin architecture с абстрактными базовыми классами.

## Обоснование
- **Анализаторы**: Каждый язык имеет свой Analyzer класс
- **Storage**: Разные backend'ы (SQLite, PostgreSQL, etc.)
- **Output**: Разные форматы (JSON, GraphML, etc.)
- **Интерфейсы**: Абстрактные базовые классы для контрактов

## Последствия
- Создать `BaseAnalyzer` абстрактный класс
- Определить интерфейсы для storage и output
- Использовать dependency injection для выбора реализации
- Документировать API для создания плагинов